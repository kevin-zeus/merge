window.__require=function t(e,o,r){function i(c,u){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var s="function"==typeof __require&&__require;if(!u&&s)return s(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,r)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<r.length;c++)i(r[c]);return i}({fruit:[function(t,e,o){"use strict";cc._RF.push(e,"44776hxH7tNwJDaU3NnChtB","fruit");var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,u=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=0,e}return i(e,t),e.prototype.init=function(t){this.id=t.id,this.node.getComponent(cc.Sprite).spriteFrame=t.iconSF},e.prototype.start=function(){},e.prototype.onBeginContact=function(t,e,o){if(e.node&&o.node){var r=e.node.getComponent("fruit"),i=o.node.getComponent("fruit");r&&i&&r.id===i.id&&e.node.emit("sameContact",{self:e,other:o})}},n([a],e.prototype,"id",void 0),n([u],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"52798eULTVEQZlLL0q88ags","game");var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,u=c.ccclass,a=c.property,s=cc.Class({name:"FruitItem",properties:{id:0,iconSF:cc.SpriteFrame}}),p=cc.Class({name:"JuiceItem",properties:{grain:cc.SpriteFrame,bead:cc.SpriteFrame,juice:cc.SpriteFrame}}),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fruitPrefab=null,e.juicePrefab=null,e.fruits=[],e.juices=[],e.boomAudio=null,e.knockAudio=null,e.waterAudio=null,e.scoreLabel=null,e.fingerBtn=null,e.speed=0,e.fruitCount=0,e.currentFruit=null,e.isCreating=!1,e.score=0,e.useFinger=!1,e.touchX=0,e}return i(e,t),e.prototype.onLoad=function(){this.initPhysics(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.initOneFruit(1)},e.prototype.initPhysics=function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,-1260),cc.director.getCollisionManager().enabled=!0},e.prototype.onTouchStart=function(t){this.currentFruit&&(this.touchX=t.getLocation().x)},e.prototype.onTouchMove=function(t){if(this.currentFruit){var e=t.getLocation().x,o=(e-this.touchX)*this.speed,r=this.currentFruit.x+o;r>=this.node.width/2&&(r=this.node.width/2-this.currentFruit.width/2),r<=-this.node.width/2&&(r=-this.node.width/2+this.currentFruit.width/2),this.currentFruit.x=r,this.touchX=e}},e.prototype.onTouchEnd=function(){var t=this;this.currentFruit&&(this.startFruitPhysics(this.currentFruit),this.currentFruit=null,this.scheduleOnce(function(){var e=t.getNextFruitId();t.initOneFruit(e)},1))},e.prototype.initOneFruit=function(t){void 0===t&&(t=1),this.currentFruit||(this.fruitCount++,this.currentFruit=this.createFruitOnPos(0,400,t))},e.prototype.getNextFruitId=function(){return this.fruitCount<3?1:3===this.fruitCount?2:Math.floor(5*Math.random())+1},e.prototype.createFruitOnPos=function(t,e,o){void 0===o&&(o=1);var r=this.createOneFruit(o);return r.setPosition(cc.v2(t,e)),r},e.prototype.createOneFruit=function(t){var e=cc.instantiate(this.fruitPrefab),o=this.fruits[t-1];return e.getComponent("fruit").init({id:o.id,iconSF:o.iconSF}),e.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,e.getComponent(cc.PhysicsCircleCollider).radius=0,this.node.addChild(e),e.scale=.68,e.on("sameContact",this.onSameFruitContact.bind(this)),e},e.prototype.startFruitPhysics=function(t){t.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;var e=t.getComponent(cc.PhysicsCircleCollider);e.radius=t.height/2,e.apply()},e.prototype.onSameFruitContact=function(t){var e=t.self,o=t.other;o.node.off("sameContact");var r=o.node,i=r.x,n=r.y,c=o.getComponent("fruit").id,u=parseInt(c)+1;if(e.node.removeFromParent(!0),o.node.removeFromParent(!0),u<=11){var a=this.createFruitOnPos(i,n,u);this.startFruitPhysics(a)}this.addScore(c),this.createFruitJuice(c,cc.v2(i,n),o.node.width)},e.prototype.createFruitJuice=function(t,e,o){cc.audioEngine.play(this.boomAudio,!1,.3),cc.audioEngine.play(this.waterAudio,!1,1);var r=cc.instantiate(this.juicePrefab);this.node.addChild(r);var i=this.juices[t-1],n=r.getComponent("juice");n.init(i),n.showJuice(e,o)},e.prototype.addScore=function(t){this.score+=2*t,this.scoreLabel.string=""+this.score},n([a(cc.Prefab)],e.prototype,"fruitPrefab",void 0),n([a(cc.Prefab)],e.prototype,"juicePrefab",void 0),n([a(s)],e.prototype,"fruits",void 0),n([a(p)],e.prototype,"juices",void 0),n([a(cc.AudioClip)],e.prototype,"boomAudio",void 0),n([a(cc.AudioClip)],e.prototype,"knockAudio",void 0),n([a(cc.AudioClip)],e.prototype,"waterAudio",void 0),n([a(cc.Label)],e.prototype,"scoreLabel",void 0),n([a(cc.Button)],e.prototype,"fingerBtn",void 0),n([a],e.prototype,"speed",void 0),n([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{}],juice:[function(t,e,o){"use strict";cc._RF.push(e,"0381fAy5rxOYa4CT/C1v5NH","juice");var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,u=c.ccclass,a=c.property,s=function(t,e){return Math.floor(Math.random()*(e-t)+t)},p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grain=null,e.bead=null,e.juice=null,e}return i(e,t),e.prototype.init=function(t){this.grain=t.grain,this.bead=t.bead,this.juice=t.juice},e.prototype.showJuice=function(t,e){for(var o=function(){var o=new cc.Node("Sprite");o.addComponent(cc.Sprite).spriteFrame=r.grain,o.parent=r.node;var i=359*Math.random(),n=30*Math.random()+e/2,c=cc.v2(Math.sin(i*Math.PI/180)*n,Math.cos(i*Math.PI/180)*n);o.scale=.5*Math.random()+e/100;var u=.5*Math.random();o.x=t.x,o.y=t.y,o.runAction(cc.sequence(cc.spawn(cc.moveBy(u,c),cc.scaleTo(u+.5,.3),cc.rotateBy(u+.5,s(-360,360))),cc.fadeOut(.1),cc.callFunc(function(){o.active=!1},r)))},r=this,i=0;i<10;++i)o();for(var n=function(){var o=new cc.Node("Sprite");o.addComponent(cc.Sprite).spriteFrame=c.bead,o.parent=c.node;var r=359*Math.random(),i=30*Math.random()+e/2,n=cc.v2(Math.sin(r*Math.PI/180)*i,Math.cos(r*Math.PI/180)*i);o.scale=.5*Math.random()+e/100;var u=.5*Math.random();o.x=t.x,o.y=t.y,o.runAction(cc.sequence(cc.spawn(cc.moveBy(u,n),cc.scaleTo(u+.5,.3)),cc.fadeOut(.1),cc.callFunc(function(){o.active=!1},c)))},c=this,u=0;u<20;u++)n();var a=new cc.Node("Sprite");a.addComponent(cc.Sprite).spriteFrame=this.juice,a.parent=this.node,a.x=t.x,a.y=t.y,a.scale=0,a.angle=s(0,360),a.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,e/150),cc.fadeOut(1)),cc.callFunc(function(){a.active=!1})))},n([a(cc.SpriteFrame)],e.prototype,"grain",void 0),n([a(cc.SpriteFrame)],e.prototype,"bead",void 0),n([a(cc.SpriteFrame)],e.prototype,"juice",void 0),n([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{}]},{},["fruit","game","juice"]);